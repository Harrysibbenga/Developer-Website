---
// src/components/sections/CTA.astro
/**
 * Call-to-Action section for encouraging project inquiries
 */

 import { BUSINESS_INFO } from '../../utils/constants'
import TechIcon from '../decor/TechIcon.astro'
---

<section id="cta" class="py-20 bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 text-white relative overflow-hidden">
  <!-- Animated Background Tech Icons -->
  <div aria-hidden="true" class="absolute inset-0 overflow-hidden opacity-10">
    <TechIcon 
      tech="python" 
      size="large"
      position={{ top: "15%", left: "8%" }} 
      animation="float"
      delay={0.5}
      opacity={0.2}
      blur={true}
    />
    <TechIcon 
      tech="vue" 
      size="medium"
      position={{ top: "25%", right: "12%" }} 
      animation="pulse"
      delay={1.2}
      opacity={0.15}
      blur={true}
    />
    <TechIcon 
      tech="django" 
      size="large"
      position={{ bottom: "20%", left: "15%" }} 
      animation="rotate"
      delay={2.0}
      opacity={0.2}
      blur={true}
    />
    <TechIcon 
      tech="postgresql" 
      size="medium"
      position={{ bottom: "30%", right: "20%" }} 
      animation="float"
      delay={1.8}
      opacity={0.15}
      blur={true}
    />
  </div>

  <!-- Background Pattern -->
  <div class="absolute inset-0 opacity-5">
    <div class="grid grid-cols-16 gap-1 h-full">
      {Array.from({ length: 256 }, (_, i) => (
        <div 
          class="bg-cyan-400 rounded-sm animate-pulse"
          style={`animation-delay: ${(i * 50)}ms; animation-duration: ${3 + (i % 4)}s`}
        />
      ))}
    </div>
  </div>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <div class="text-center">
      <!-- Main Heading -->
      <div class="animate-on-scroll">
        <h2 class="text-4xl lg:text-6xl font-black mb-6 leading-tight">
          Ready to Build
          <span class="block bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent">
            Something Amazing?
          </span>
        </h2>

        <p class="text-xl lg:text-2xl text-blue-100 mb-12 max-w-4xl mx-auto leading-relaxed">
          Let's transform your ideas into powerful, scalable solutions. 
          Get a free consultation and detailed project proposal.
        </p>
      </div>

      <!-- Action Buttons -->
      <div class="flex flex-col sm:flex-row gap-6 justify-center mb-16 animate-on-scroll" style="animation-delay: 200ms">
        <a
          href="/contact"
          class="group relative inline-flex items-center px-8 py-4 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-xl font-semibold text-lg shadow-2xl hover:shadow-cyan-500/25 transform hover:scale-105 transition-all duration-300"
        >
          <svg class="w-6 h-6 mr-3 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.959 8.959 0 01-2.4-.32l-3.6 1.2 1.2-3.6A8.959 8.959 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"/>
          </svg>
          <span>Start Your Project</span>
          <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-cyan-400 to-blue-400 opacity-0 group-hover:opacity-20 transition-opacity -z-10"></div>
        </a>
        
        <a
          href="/portfolio"
          class="group inline-flex items-center px-8 py-4 border-2 border-cyan-400 rounded-xl font-semibold text-lg text-cyan-400 hover:bg-cyan-400 hover:text-gray-900 transition-all duration-300"
        >
          <svg class="w-6 h-6 mr-3 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
          </svg>
          <span>View My Work</span>
        </a>
      </div>

      <!-- Contact Methods -->
      <div class="grid md:grid-cols-3 gap-8 max-w-4xl mx-auto animate-on-scroll" style="animation-delay: 400ms">
        <!-- Email -->
        <div class="contact-method bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300">
          <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
            </svg>
          </div>
          <h3 class="text-xl font-semibold mb-2">Email Me</h3>
          <p class="text-blue-200 text-sm mb-4">Get a detailed response within 24 hours</p>
          <a 
            href={`mailto:${BUSINESS_INFO.contact.email}`}
            class="text-cyan-300 hover:text-cyan-200 font-medium transition-colors"
          >
            {BUSINESS_INFO.contact.email}
          </a>
        </div>

        <!-- Phone -->
        <div class="contact-method bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300">
          <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
            </svg>
          </div>
          <h3 class="text-xl font-semibold mb-2">Call Me</h3>
          <p class="text-blue-200 text-sm mb-4">Direct line for urgent inquiries</p>
          <a 
            href={`tel:${BUSINESS_INFO.contact.phone}`}
            class="text-cyan-300 hover:text-cyan-200 font-medium transition-colors"
          >
            {BUSINESS_INFO.contact.phone}
          </a>
        </div>

        <!-- Location -->
        <div class="contact-method bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300">
          <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
            </svg>
          </div>
          <h3 class="text-xl font-semibold mb-2">Meet in Person</h3>
          <p class="text-blue-200 text-sm mb-4">Based in Milton Keynes, UK</p>
          <div class="text-cyan-300 font-medium">
            {BUSINESS_INFO.contact.address.city}, {BUSINESS_INFO.contact.address.country}
          </div>
        </div>
      </div>

      <!-- Availability Notice -->
      <div class="mt-16 animate-on-scroll" style="animation-delay: 600ms">
        <div class="inline-flex items-center px-6 py-3 bg-green-600/20 border border-green-400/30 rounded-full">
          <div class="w-3 h-3 bg-green-400 rounded-full mr-3 animate-pulse"></div>
          <span class="text-green-300 font-medium">Currently accepting new projects for Q1 2025</span>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* CTA specific animations */
  .contact-method:hover {
    transform: translateY(-5px);
  }
  
  /* Gradient text animation */
  .bg-gradient-to-r {
    background-size: 200% 200%;
    animation: gradient-shift 3s ease infinite;
  }
  
  @keyframes gradient-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  
  /* Testimonial hover effects */
  .testimonial-card:hover {
    transform: translateY(-5px);
  }
  
  /* Stats counter animation */
  .stat-number {
    animation: countUp 2s ease-out;
  }
  
  @keyframes countUp {
    from { opacity: 0; transform: scale(0.5); }
    to { opacity: 1; transform: scale(1); }
  }
  
  /* Animation classes */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s ease-out;
  }
  
  .animate-on-scroll.animate-in {
    opacity: 1;
    transform: translateY(0);
  }
  
  .stagger-animation {
    transition-delay: var(--animation-delay, 0ms);
  }
</style>

<script>
  // Animate stats when they come into view
  document.addEventListener('DOMContentLoaded', () => {
    const observerOptions = {
      threshold: 0.3,
      rootMargin: '0px 0px -50px 0px'
    }
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-in')
          
          // Handle staggered animations
          const staggeredElements = entry.target.querySelectorAll('.stagger-animation')
          staggeredElements.forEach((el, index) => {
            el.style.setProperty('--animation-delay', `${index * 100}ms`)
          })
          
          observer.unobserve(entry.target)
        }
      })
    }, observerOptions)
    
    // Observe elements with animation classes
    document.querySelectorAll('.animate-on-scroll').forEach((el) => {
      observer.observe(el)
    })
  })
</script>
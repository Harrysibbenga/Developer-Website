---
// src/components/sections/ServiceCardsContainer.astro
/**
 * Container component for displaying service cards
 * Responsive grid layout with optional title and description
 */

import ServiceCard from '../ui/ServiceCard.astro'
import { SERVICES } from '../../utils/constants'

export interface Props {
  title?: string
  description?: string
  variant?: 'homepage' | 'services'
  showPricing?: boolean
  maxCards?: number
  className?: string
}

const {
  title = 'Our Services',
  description = 'Professional development services tailored to your needs',
  variant = 'homepage',
  showPricing = false,
  maxCards,
  className = ''
} = Astro.props

const isHomepage = variant === 'homepage'
const cardVariant = isHomepage ? 'compact' : 'default'

// Get services data and limit if needed
const servicesData = Object.entries(SERVICES)
const displayServices = maxCards ? servicesData.slice(0, maxCards) : servicesData
---

<section class={`py-16 sm:py-20 ${className}`}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    
    <!-- Section Header -->
    {(title || description) && (
      <div class="text-center mb-12 sm:mb-16 animate-on-scroll">
        {title && (
          <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 mb-4 sm:mb-6">
            {title}
          </h2>
        )}
        {description && (
          <p class="text-lg sm:text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
            {description}
          </p>
        )}
      </div>
    )}

    <!-- Services Grid -->
    <div class={`grid gap-6 sm:gap-8 ${
      isHomepage 
        ? 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3' 
        : 'grid-cols-1 lg:grid-cols-2'
    }`}>
      {displayServices.map(([key, service], index) => (
        <ServiceCard
          title={service.title}
          description={service.description}
          icon={service.icon}
          startingPrice={showPricing ? service.startingPrice : undefined}
          technologies={service.technologies}
          features={service.features}
          ctaText={isHomepage ? 'Learn More' : `Get Quote for ${service.title}`}
          ctaLink={isHomepage ? '/services' : '/contact'}
          variant={index === 0 && !isHomepage ? 'featured' : cardVariant}
          index={index}
        />
      ))}
    </div>

    <!-- Homepage CTA -->
    {isHomepage && (
      <div class="text-center mt-12 sm:mt-16 animate-on-scroll">
        <div class="inline-flex flex-col sm:flex-row gap-4">
          <a
            href="/services"
            class="inline-flex items-center justify-center px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105"
          >
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h4M9 7h6m-6 4h6m-6 4h6"/>
            </svg>
            View All Services
          </a>
          
          <a
            href="/contact"
            class="inline-flex items-center justify-center px-6 sm:px-8 py-3 sm:py-4 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:border-blue-600 hover:text-blue-600 transition-all duration-300"
          >
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.959 8.959 0 01-2.4-.32l-3.6 1.2 1.2-3.6A8.959 8.959 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"/>
            </svg>
            Get Started
          </a>
        </div>
        
        <!-- Trust Indicators -->
        <div class="mt-8 sm:mt-12">
          <p class="text-sm text-gray-500 mb-4">Trusted by businesses across the UK</p>
          <div class="flex flex-wrap justify-center items-center gap-6 sm:gap-8 text-gray-400">
            <div class="flex items-center">
              <svg class="w-5 h-5 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              <span class="text-sm">Free Consultation</span>
            </div>
            <div class="flex items-center">
              <svg class="w-5 h-5 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              <span class="text-sm">30-Day Support</span>
            </div>
            <div class="flex items-center">
              <svg class="w-5 h-5 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              <span class="text-sm">No Hidden Fees</span>
            </div>
          </div>
        </div>
      </div>
    )}

    <!-- Services Page CTA -->
    {!isHomepage && (
      <div class="text-center mt-12 sm:mt-16 animate-on-scroll">
        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 sm:p-8 border border-blue-200">
          <h3 class="text-xl sm:text-2xl font-bold text-gray-900 mb-4">
            Ready to Get Started?
          </h3>
          <p class="text-gray-600 mb-6 max-w-2xl mx-auto">
            Get a detailed quote and timeline for your specific requirements. 
            Free 30-minute consultation included.
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a
              href="/contact"
              class="inline-flex items-center justify-center px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300"
            >
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.959 8.959 0 01-2.4-.32l-3.6 1.2 1.2-3.6A8.959 8.959 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"/>
              </svg>
              Get Free Quote
            </a>
            
            <a
              href="/portfolio"
              class="inline-flex items-center justify-center px-6 sm:px-8 py-3 sm:py-4 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:border-blue-600 hover:text-blue-600 transition-all duration-300"
            >
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
              </svg>
              View Case Studies
            </a>
          </div>
        </div>
      </div>
    )}
  </div>
</section>

<style>
  /* Animation classes */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s ease-out;
  }
  
  .animate-on-scroll.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  /* Responsive grid adjustments */
  @media (max-width: 640px) {
    .grid {
      gap: 1.5rem;
    }
  }

  /* Enhanced trust indicators */
  .trust-indicator {
    transition: all 0.3s ease;
  }

  .trust-indicator:hover {
    transform: translateY(-2px);
    color: rgb(34 197 94);
  }

  /* CTA button enhancements */
  .cta-button {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .cta-button:hover {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }

  /* Accessibility improvements */
  @media (prefers-reduced-motion: reduce) {
    .animate-on-scroll,
    .cta-button {
      animation: none !important;
      transition: none !important;
    }
  }
</style>